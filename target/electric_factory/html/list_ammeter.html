<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>电表查询</title>
		<title>Demo: dojox/grid/DataGrid</title>
		<link rel="stylesheet" href="/dojo-release-1.7.2/dijit/themes/claro/claro.css">
		<link rel="stylesheet" href="/dojo-release-1.7.2/dojox/grid/resources/claroGrid.css">
		<link rel="stylesheet" href="/dojo-release-1.7.2/dojo/resources/dojo.css" media="screen">
		<!-- load dojo and provide config via data attribute -->
		<script src="/dojo-release-1.7.2/dojo/dojo.js"
				data-dojo-config="async: true">
		</script>
		<script>
			var grid, store, dataStore;
			require([
				"dojox/grid/DataGrid",
				"dojo/store/Memory",
				"dojo/data/ObjectStore",
				"dojo/_base/xhr",
				"dojo/domReady!"
			], function(DataGrid, Memory, ObjectStore, xhr){
				xhr.get({
					url: "/ammeter/list",
					handleAs: "json"
				}).then(function(data){
					store = new Memory({ items: data });
					dataStore = new ObjectStore({ objectStore: store });
					grid = new DataGrid({
						editable:true,
						store: dataStore,
						structure: [
						     { name: "电表编号", field: "id", width: "25%"},
							 { name: "电表名称", field: "name", width: "25%",editable:true},
							 { name: "泵名称", field: "pumpName", width: "25%",editable:true},
							 { name:"项目名称", field: "projectName",width: "25%",editable:true},
							 { name:" 公司名称", field: "companyName",width: "25%",editable:true}
						]
					}, "grid");
					
					// since we created this grid programmatically, call startup to render it
					grid.startup();
				});
			});
		</script>
	</head>
	<body class="claro">
		<br/>
		<div id="grid" style="width: 600px; height: 200px"></div>
	</body>
</html>
